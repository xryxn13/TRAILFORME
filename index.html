downloadPDFButton.addEventListener('click', function () {
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();
    
    const canvasWidth = outputCanvas.width;
    const canvasHeight = outputCanvas.height;
    const cutSize = 10; // 10x10 pixel cuts

    let pageAdded = false;

    async function addCanvasToPDF(x, y) {
        const imgData = outputCanvas.toDataURL('image/png', x, y, cutSize, cutSize);
        pdf.addImage(imgData, 'PNG', 10, 10, 30, 30);
        if ((x / cutSize + 1) % 5 === 0) {
            pdf.addPage();
        }
    }

    async function generatePDF() {
        for (let y = 0; y < canvasHeight; y += cutSize) {
            for (let x = 0; x < canvasWidth; x += cutSize) {
                await addCanvasToPDF(x, y); // Await ensures the process waits for one image to be added before continuing
            }
        }

        pdf.save('dice_output.pdf');
    }

    generatePDF();
});

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Splitter to PDF</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        canvas {
            border: 1px solid #000;
            margin-bottom: 20px;
        }
        #downloadBtn {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        #downloadBtn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<h2>Cut Image into 10x10 Pixel Parts</h2>
<input type="file" id="imageInput" accept="image/*">
<canvas id="canvas"></canvas>
<button id="downloadBtn">Download PDF</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
    const imageInput = document.getElementById("imageInput");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const downloadBtn = document.getElementById("downloadBtn");
    let image = new Image();
    let imgParts = [];

    // Handle image selection and loading
    imageInput.addEventListener("change", function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                image.onload = function() {
                    // Set canvas size based on image dimensions
                    canvas.width = image.width;
                    canvas.height = image.height;
                    // Draw the image on the canvas
                    ctx.drawImage(image, 0, 0);
                    // Split the image into 10x10 pixel parts
                    splitImageIntoParts(image.width, image.height, 10);
                };
                image.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });

    // Function to split the image into parts
    function splitImageIntoParts(imageWidth, imageHeight, partSize) {
        imgParts = [];
        for (let y = 0; y < imageHeight; y += partSize) {
            for (let x = 0; x < imageWidth; x += partSize) {
                const partCanvas = document.createElement("canvas");
                const partCtx = partCanvas.getContext("2d");
                partCanvas.width = partSize;
                partCanvas.height = partSize;
                partCtx.drawImage(canvas, x, y, partSize, partSize, 0, 0, partSize, partSize);
                imgParts.push(partCanvas);
            }
        }
    }

    // Function to generate and download the PDF
    downloadBtn.addEventListener("click", function() {
        if (imgParts.length > 0) {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            let x = 10, y = 10;

            imgParts.forEach((partCanvas, index) => {
                const imgData = partCanvas.toDataURL("image/png");
                pdf.addImage(imgData, "PNG", x, y, 10, 10);
                x += 12; // Move to the next position
                if (x > 180) { // New line if it exceeds page width
                    x = 10;
                    y += 12;
                }
                if (index % 50 === 0 && index !== 0) { // Add new page after 50 images
                    pdf.addPage();
                    x = 10;
                    y = 10;
                }
            });

            pdf.save("image-parts.pdf");
        }
    });
</script>

</body>
</html>
